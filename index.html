<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zakat Calculator - Privacy Protected Islamic Zakat Nisab Calculation Tool | Powered By Wemos D1 Mini Pro</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Free online Zakat calculator tool. Calculate your Islamic charitable obligation with accurate Nisab threshold, gold and silver prices. Support for multiple languages and currencies.">
    <meta name="keywords" content="Zakat calculator, Islamic finance, Nisab threshold, Zakat obligation, Islamic charity, gold price, silver price, Islamic wealth management">
    <meta name="author" content="Sharfuddi Shawon">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="theme-color" content="#22c55e">
    
    <!-- Open Graph Meta Tags (Social Media) -->
    <meta property="og:title" content="Zakat Calculator - Calculate Your Islamic Charitable Obligation">
    <meta property="og:description" content="Free Zakat calculator with support for multiple languages. Calculate based on cash, gold, silver, investments and more.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://zakat.dhakaiya.dev">
    <meta property="og:site_name" content="Zakat Calculator">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="ar_SA">
    <meta property="og:locale:alternate" content="bn_BD">
    <meta property="og:locale:alternate" content="hi_IN">
    <!-- <meta property="og:image" content="https://zakat.dhakaiya.dev/og-image.jpg"> -->
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Zakat Calculator - Islamic Finance Tool">
    <meta name="twitter:description" content="Free online Zakat calculator. Calculate your Zakat obligation based on gold, silver, cash and investments.">
    <!-- <meta name="twitter:image" content="https://zakat.dhakaiya.dev/twitter-image.jpg"> -->
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Zakat Calculator - Privacy Protected Islamic Zakat Nisab Calculation Tool",
      "description": "Free online privacy protected Zakat calculator tool for calculating Islamic zakat obligations. Your information never leaves your device.",
      "url": "https://zakat.dhakaiya.dev",
      "applicationCategory": "ProductivityApplication",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Person",
        "name": "Sharfuddin Shawon",
        "url": "https://github.com/sharf-shawon"
      },
      "inLanguage": ["en", "ar", "bn", "hi"],
      "operatingSystem": "Web",
      "featureList": [
        "Multi-language support",
        "Real-time Zakat calculation",
        "Zakat Nisab threshold calculation",
        "Privacy protected; runs entirely in browser.",
        "Works on all devices"
      ]
    }
    </script>
    
    <!-- Canonical Link -->
    <link rel="canonical" href="https://zakat.dhakaiya.dev">
        
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üïå</text></svg>">
        
    <!-- Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Configuration with Dark Mode Support -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            800: '#166534',
                            900: '#145231',
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* System Dark Mode Detection */
        @media (prefers-color-scheme: dark) {
            html {
                color-scheme: dark;
            }
        }

        @media (prefers-color-scheme: light) {
            html {
                color-scheme: light;
            }
        }

        /* Smooth transitions */
        html {
            transition: background-color 0.3s, color 0.3s;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgb(34, 197, 94);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgb(22, 163, 74);
        }

        /* Animation for results */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }

        /* Glassmorphism effect */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .dark .glass {
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        /* Input focus effect */
        input:focus-visible {
            outline: none;
        }

        /* Ripple effect on buttons */
        button {
            position: relative;
            overflow: hidden;
        }

        button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        button:active::after {
            width: 300px;
            height: 300px;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 transition-colors duration-300">
    
    <!-- Header with Controls -->
    <div class="sticky top-0 z-50 bg-white dark:bg-slate-800 shadow-md border-b border-gray-200 dark:border-slate-700 transition-colors duration-300">
        <div class="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="text-2xl">üïå</div>
                <h1 class="text-2xl font-bold text-primary-600 dark:text-primary-400">Zakat Calculator</h1>
            </div>
            
            <div class="flex items-center gap-3">
                <!-- Language Selector -->
                <div class="relative group">
                    <button class="px-4 py-2 rounded-lg bg-gray-100 dark:bg-slate-700 hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors duration-200 text-sm font-medium flex items-center gap-2">
                        <span id="langDisplay">üá∫üá∏ English</span>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
                        </svg>
                    </button>
                    
                    <div class="absolute right-0 mt-2 w-48 bg-white dark:bg-slate-700 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                        <button onclick="setLanguage('en')" class="w-full text-left px-4 py-3 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-t-lg transition-colors duration-200">üá∫üá∏ English</button>
                        <button onclick="setLanguage('ar')" class="w-full text-left px-4 py-3 hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors duration-200">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
                        <button onclick="setLanguage('bn')" class="w-full text-left px-4 py-3 hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors duration-200">üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button>
                        <button onclick="setLanguage('hi')" class="w-full text-left px-4 py-3 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-b-lg transition-colors duration-200">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
                    </div>
                </div>
                
                <!-- Dark Mode Toggle -->
                <button onclick="toggleDarkMode()" class="p-2 rounded-lg bg-gray-100 dark:bg-slate-700 hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors duration-200" title="Toggle dark mode">
                    <svg id="sunIcon" class="w-5 h-5 text-yellow-500 hidden" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v2a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l-2.12-2.12a1 1 0 00-1.414 0l-.707.707a1 1 0 001.414 1.414l.707-.707 2.12 2.12a1 1 0 001.414-1.414l-.707-.707z" clip-rule="evenodd"/>
                    </svg>
                    <svg id="moonIcon" class="w-5 h-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-5xl mx-auto px-4 py-8">
        
        <!-- Welcome Banner -->
        <div class="mb-8 bg-gradient-to-r from-primary-50 to-emerald-50 dark:from-slate-800 dark:to-slate-700 rounded-xl p-6 border border-primary-200 dark:border-slate-600">
            <p class="text-center text-slate-700 dark:text-slate-300" id="subtitle">
                Calculate your Zakat obligation with complete breakdown
            </p>
        </div>

        <!-- Main Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            
            <!-- Metal Prices Section -->
            <div class="lg:col-span-1 bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-slate-700">
                <h2 class="text-xl font-bold mb-6 flex items-center gap-2 text-slate-900 dark:text-white">
                    <span>üí∞</span>
                    <span id="pricesTitle">Metal Prices</span>
                </h2>
                
                <div class="space-y-4">
                    <div>
                        <label id="goldPriceLabel" class="block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300">Gold Price (per gram)</label>
                        <div class="flex items-center gap-2">
                            <input type="number" id="goldPrice" value="78.50" step="0.01" 
                                   class="flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200"
                                   oninput="calculate()">
                            <span class="text-slate-600 dark:text-slate-400 font-medium">$</span>
                        </div>
                    </div>
                    
                    <div>
                        <label id="silverPriceLabel" class="block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300">Silver Price (per gram)</label>
                        <div class="flex items-center gap-2">
                            <input type="number" id="silverPrice" value="0.95" step="0.01"
                                   class="flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200"
                                   oninput="calculate()">
                            <span class="text-slate-600 dark:text-slate-400 font-medium">$</span>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-blue-50 dark:bg-slate-700 rounded-lg text-sm text-blue-800 dark:text-blue-300">
                        <p id="priceHint">üí° Prices update automatically. Adjust for current market rates.</p>
                    </div>
                </div>
            </div>

            <!-- Assets Section -->
            <div class="lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-slate-700">
                <h2 class="text-xl font-bold mb-6 flex items-center gap-2 text-slate-900 dark:text-white">
                    <span>üíé</span>
                    <span id="assetsTitle">Assets & Investments</span>
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label id="cashLabel" class="block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300">Cash & Bank Balances</label>
                        <input type="number" id="cash" placeholder="0.00" oninput="calculate()"
                               class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200">
                    </div>
                    
                    <div>
                        <label id="goldLabel" class="block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300">Gold (grams)</label>
                        <input type="number" id="gold" placeholder="0" oninput="calculate()"
                               class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200">
                    </div>
                    
                    <div>
                        <label id="silverLabel" class="block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300">Silver (grams)</label>
                        <input type="number" id="silver" placeholder="0" oninput="calculate()"
                               class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200">
                    </div>
                    
                    <div>
                        <label id="investmentsLabel" class="block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300">Stocks/Investments</label>
                        <input type="number" id="investments" placeholder="0.00" oninput="calculate()"
                               class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200">
                    </div>
                    
                    <div>
                        <label id="businessLabel" class="block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300">Business Inventory</label>
                        <input type="number" id="business" placeholder="0.00" oninput="calculate()"
                               class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200">
                    </div>
                    
                    <div>
                        <label id="rentalLabel" class="block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300">Rental Income (Annual)</label>
                        <input type="number" id="rental" placeholder="0.00" oninput="calculate()"
                               class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200">
                    </div>
                </div>
            </div>
        </div>

        <!-- Liabilities Section -->
        <div class="bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-slate-700 mb-8">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-2 text-slate-900 dark:text-white">
                <span>üìâ</span>
                <span id="liabilitiesTitle">Liabilities (Deductible)</span>
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label id="debtsLabel" class="block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300">Debts & Loans</label>
                    <input type="number" id="debts" placeholder="0.00" oninput="calculate()"
                           class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200">
                </div>
            </div>
        </div>

        <!-- RESULTS BREAKDOWN -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8" id="resultsCards">
            <!-- Total Wealth Card -->
            <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform duration-300 animate-slide-in">
                <p class="text-sm font-medium opacity-90 mb-2" id="totalWealthTitle">Total Wealth</p>
                <p class="text-3xl font-bold mb-2" id="totalWealth">$0.00</p>
                <p class="text-xs opacity-75">All assets combined</p>
            </div>

            <!-- Deductible Card -->
            <div class="bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform duration-300 animate-slide-in">
                <p class="text-sm font-medium opacity-90 mb-2" id="deductibleTitle">Deductible</p>
                <p class="text-3xl font-bold mb-2" id="totalDeductible">$0.00</p>
                <p class="text-xs opacity-75">Liabilities only</p>
            </div>

            <!-- Zakatable Wealth Card -->
            <div class="bg-gradient-to-br from-emerald-500 to-emerald-600 text-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform duration-300 animate-slide-in">
                <p class="text-sm font-medium opacity-90 mb-2" id="zakatableTitle">Zakatable Wealth</p>
                <p class="text-3xl font-bold mb-2" id="zakatableWealth">$0.00</p>
                <p class="text-xs opacity-75">Net wealth</p>
            </div>

            <!-- Nisab Card -->
            <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform duration-300 animate-slide-in">
                <p class="text-sm font-medium opacity-90 mb-2" id="nisabTitle">Nisab Threshold</p>
                <p class="text-3xl font-bold mb-2" id="nisabAmount">$0.00</p>
                <p class="text-xs opacity-75">85g gold equivalent</p>
            </div>
        </div>

        <!-- Main Zakat Due Section -->
        <div class="bg-gradient-to-r from-primary-500 to-emerald-500 text-white rounded-xl shadow-2xl p-8 mb-8 transform hover:shadow-xl transition-all duration-300 animate-slide-in">
            <div class="text-center">
                <p class="text-lg font-semibold opacity-90 mb-2" id="payableTitle">Payable Zakat (2.5%)</p>
                <p class="text-6xl font-black mb-4" id="payableZakat">$0.00</p>
                <p class="text-sm opacity-90" id="nisabStatus">Calculate above to see your Zakat amount</p>
            </div>
        </div>

        <!-- Nisab Status Info -->
        <div id="nisabStatusBox" class="bg-yellow-50 dark:bg-slate-700 border-l-4 border-yellow-400 p-4 rounded-lg mb-8 hidden">
            <p class="text-yellow-800 dark:text-yellow-200" id="nisabStatusMessage">Your wealth is below the Nisab threshold. No Zakat is due at this time.</p>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <button onclick="calculate()" class="px-8 py-3 bg-primary-500 hover:bg-primary-600 text-white font-bold rounded-lg shadow-lg transition-all duration-200 flex items-center justify-center gap-2">
                <span>üîÑ</span>
                <span id="calculateBtn">Calculate Zakat</span>
            </button>
            <button onclick="resetForm()" class="px-8 py-3 bg-gray-400 dark:bg-slate-600 hover:bg-gray-500 dark:hover:bg-slate-500 text-white font-bold rounded-lg shadow-lg transition-all duration-200 flex items-center justify-center gap-2">
                <span>üîÅ</span>
                <span id="resetBtn">Reset All</span>
            </button>
            <button onclick="printZakat()" class="px-8 py-3 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-lg shadow-lg transition-all duration-200 flex items-center justify-center gap-2">
                <span>üñ®Ô∏è</span>
                <span id="printBtn">Print Report</span>
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-100 dark:bg-slate-800 border-t border-gray-200 dark:border-slate-700 mt-12 py-6 transition-colors duration-300">
        <div class="max-w-5xl mx-auto px-4 text-center text-slate-600 dark:text-slate-400 text-sm">
            <p id="footer">¬© 2026 Zakat Calculator | Running on ESP8266 | <a href="https://github.com/sharf-shawon/ZakatCalc" target="_blank" rel="noopener noreferrer">GitHub</a></p>
        </div>
    </footer>

    <script>
        // ========================================
        // TRANSLATIONS
        // ========================================
        const translations = {
            en: {
                subtitle: 'Calculate your Zakat obligation with complete breakdown',
                pricesTitle: 'Metal Prices',
                goldPriceLabel: 'Gold Price (per gram)',
                silverPriceLabel: 'Silver Price (per gram)',
                priceHint: 'üí° Prices update automatically. Adjust for current market rates.',
                assetsTitle: 'Assets & Investments',
                cashLabel: 'Cash & Bank Balances',
                goldLabel: 'Gold (grams)',
                silverLabel: 'Silver (grams)',
                investmentsLabel: 'Stocks/Investments',
                businessLabel: 'Business Inventory',
                rentalLabel: 'Rental Income (Annual)',
                liabilitiesTitle: 'Liabilities (Deductible)',
                debtsLabel: 'Debts & Loans',
                totalWealthTitle: 'Total Wealth',
                deductibleTitle: 'Deductible',
                zakatableTitle: 'Zakatable Wealth',
                nisabTitle: 'Nisab Threshold',
                payableTitle: 'Payable Zakat (2.5%)',
                nisabStatus: 'Calculate above to see your Zakat amount',
                calculateBtn: 'Calculate Zakat',
                resetBtn: 'Reset All',
                printBtn: 'Print Report',
                footer: '¬© 2026 Zakat Calculator | Running on ESP8266',
                belowNisab: 'Your wealth is below the Nisab threshold. No Zakat is due at this time.',
                aboveNisab: '‚úÖ Your wealth exceeds the Nisab. Zakat is due.',
                langDisplay: 'üá∫üá∏ English'
            },
            ar: {
                subtitle: 'ÿßÿ≠ÿ≥ÿ® ÿßŸÑÿ™ÿ≤ÿßŸÖŸÉ ÿ®ÿßŸÑÿ≤ŸÉÿßÿ© ŸÖÿπ ÿ™ŸÅÿµŸäŸÑ ŸÉÿßŸÖŸÑ',
                pricesTitle: 'ÿ£ÿ≥ÿπÿßÿ± ÿßŸÑŸÖÿπÿßÿØŸÜ',
                goldPriceLabel: 'ÿ≥ÿπÿ± ÿßŸÑÿ∞Ÿáÿ® (ŸÑŸÉŸÑ ÿ¨ÿ±ÿßŸÖ)',
                silverPriceLabel: 'ÿ≥ÿπÿ± ÿßŸÑŸÅÿ∂ÿ© (ŸÑŸÉŸÑ ÿ¨ÿ±ÿßŸÖ)',
                priceHint: 'üí° ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿ≥ÿπÿßÿ± ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã. ÿπÿØŸëŸÑ ÿ≠ÿ≥ÿ® ÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿ≥ŸàŸÇ ÿßŸÑÿ≠ÿßŸÑŸäÿ©.',
                assetsTitle: 'ÿßŸÑÿ£ÿµŸàŸÑ ŸàÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±ÿßÿ™',
                cashLabel: 'ÿßŸÑŸÜŸÇŸàÿØ ŸàÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑÿ®ŸÜŸÉŸä',
                goldLabel: 'ÿßŸÑÿ∞Ÿáÿ® (ÿ¨ÿ±ÿßŸÖ)',
                silverLabel: 'ÿßŸÑŸÅÿ∂ÿ© (ÿ¨ÿ±ÿßŸÖ)',
                investmentsLabel: 'ÿßŸÑÿ£ÿ≥ŸáŸÖ ŸàÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±ÿßÿ™',
                businessLabel: 'ŸÖÿÆÿ≤ŸàŸÜ ÿßŸÑÿ®ÿ∂ÿßÿ¶ÿπ',
                rentalLabel: 'ÿØÿÆŸÑ ÿßŸÑÿ•Ÿäÿ¨ÿßÿ± (ÿ≥ŸÜŸàŸä)',
                liabilitiesTitle: 'ÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖÿßÿ™ (ŸÖŸÇÿßÿ®ŸÑÿ©)',
                debtsLabel: 'ÿßŸÑÿØŸäŸàŸÜ ŸàÿßŸÑŸÇÿ±Ÿàÿ∂',
                totalWealthTitle: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ´ÿ±Ÿàÿ©',
                deductibleTitle: 'ŸÖŸÇÿßÿ®ŸÑ',
                zakatableTitle: 'ÿßŸÑŸÖÿßŸÑ ÿßŸÑÿ≤ŸÉŸàŸä',
                nisabTitle: 'ÿ≠ÿØ ÿßŸÑŸÜÿµÿßÿ®',
                payableTitle: 'ÿßŸÑÿ≤ŸÉÿßÿ© ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇÿ© (Ÿ¢.Ÿ•Ÿ™)',
                nisabStatus: 'ÿßÿ≠ÿ≥ÿ® ÿ£ÿπŸÑÿßŸá ŸÑÿ™ÿ±Ÿâ ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ≤ŸÉÿßÿ©',
                calculateBtn: 'ÿßÿ≠ÿ≥ÿ® ÿßŸÑÿ≤ŸÉÿßÿ©',
                resetBtn: 'ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÉŸÑ',
                printBtn: 'ÿ∑ÿ®ÿßÿπÿ© ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±',
                footer: '¬© 2026 Zakat Calculator | Running on ESP8266',
                belowNisab: 'ÿ´ÿ±Ÿàÿ™ŸÉ ÿ£ŸÇŸÑ ŸÖŸÜ ÿ≠ÿØ ÿßŸÑŸÜÿµÿßÿ®. ŸÑÿß ÿ≤ŸÉÿßÿ© ŸÖÿ≥ÿ™ÿ≠ŸÇÿ© ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ≠ÿßŸÑŸä.',
                aboveNisab: '‚úÖ ÿ´ÿ±Ÿàÿ™ŸÉ ÿ™ÿ™ÿ¨ÿßŸàÿ≤ ÿ≠ÿØ ÿßŸÑŸÜÿµÿßÿ®. ÿßŸÑÿ≤ŸÉÿßÿ© ŸÖÿ≥ÿ™ÿ≠ŸÇÿ©.',
                langDisplay: 'üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©'
            },
            bn: {
                subtitle: '‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶π ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶æ‡¶ï‡¶æ‡¶§ ‡¶¶‡¶æ‡¶Ø‡¶º‡¶ø‡¶§‡ßç‡¶¨ ‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®',
                pricesTitle: '‡¶ß‡¶æ‡¶§‡ßÅ‡¶∞ ‡¶¶‡¶æ‡¶Æ',
                goldPriceLabel: '‡¶∏‡ßã‡¶®‡¶æ‡¶∞ ‡¶¶‡¶æ‡¶Æ (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ)',
                silverPriceLabel: '‡¶∞‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶¶‡¶æ‡¶Æ (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ)',
                priceHint: 'üí° ‡¶¶‡¶æ‡¶Æ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶Ø‡¶º‡•§ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶¶‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶Æ‡¶û‡ßç‡¶ú‡¶∏‡ßç‡¶Ø ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                assetsTitle: '‡¶∏‡¶Æ‡ßç‡¶™‡¶¶ ‡¶ì ‡¶¨‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó',
                cashLabel: '‡¶®‡¶ó‡¶¶ ‡¶ì ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ô‡ßç‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏',
                goldLabel: '‡¶∏‡ßã‡¶®‡¶æ (‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ)',
                silverLabel: '‡¶∞‡ßÅ‡¶™‡¶æ (‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ)',
                investmentsLabel: '‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞/‡¶¨‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó',
                businessLabel: '‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡¶æ‡¶∞ ‡¶Æ‡¶ú‡ßÅ‡¶¶',
                rentalLabel: '‡¶≠‡¶æ‡¶°‡¶º‡¶æ ‡¶Ü‡¶Ø‡¶º (‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï)',
                liabilitiesTitle: '‡¶¶‡¶æ‡¶Ø‡¶º (‡¶ò‡ßÅ‡¶ö‡¶®‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø)',
                debtsLabel: '‡¶ã‡¶£ ‡¶ì ‡¶≤‡ßã‡¶®',
                totalWealthTitle: '‡¶Æ‡ßã‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶¶',
                deductibleTitle: '‡¶ò‡ßÅ‡¶ö‡¶®‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø',
                zakatableTitle: '‡¶ú‡¶æ‡¶ï‡¶æ‡¶§‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶¶',
                nisabTitle: '‡¶®‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶∏‡ßÄ‡¶Æ‡¶æ',
                payableTitle: '‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß‡ßç‡¶Ø ‡¶ú‡¶æ‡¶ï‡¶æ‡¶§ (‡ß®.‡ß´%)',
                nisabStatus: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶æ‡¶ï‡¶æ‡¶§ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶â‡¶™‡¶∞‡ßá ‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®',
                calculateBtn: '‡¶ú‡¶æ‡¶ï‡¶æ‡¶§ ‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®',
                resetBtn: '‡¶∏‡¶¨ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®',
                printBtn: '‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®',
                footer: '¬© 2026 Zakat Calculator | Running on ESP8266',
                belowNisab: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶¶ ‡¶®‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá‡•§ ‡¶è‡¶á ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶ú‡¶æ‡¶ï‡¶æ‡¶§ ‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß‡ßç‡¶Ø ‡¶®‡¶Ø‡¶º‡•§',
                aboveNisab: '‚úÖ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶¶ ‡¶®‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶∏‡ßÄ‡¶Æ‡¶æ ‡¶Ö‡¶§‡¶ø‡¶ï‡ßç‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßá‡•§ ‡¶ú‡¶æ‡¶ï‡¶æ‡¶§ ‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß‡ßç‡¶Ø‡•§',
                langDisplay: 'üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ'
            },
            hi: {
                subtitle: '‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ö‡§™‡§®‡•Ä ‡§ú‡§ï‡§æ‡§§ ‡§¶‡•á‡§Ø‡§§‡§æ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç',
                pricesTitle: '‡§ß‡§æ‡§§‡•Å ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç',
                goldPriceLabel: '‡§∏‡•ã‡§®‡•á ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§ (‡§™‡•ç‡§∞‡§§‡§ø ‡§ó‡•ç‡§∞‡§æ‡§Æ)',
                silverPriceLabel: '‡§ö‡§æ‡§Ç‡§¶‡•Ä ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§ (‡§™‡•ç‡§∞‡§§‡§ø ‡§ó‡•ç‡§∞‡§æ‡§Æ)',
                priceHint: 'üí° ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§Ö‡§™‡§°‡•á‡§ü ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§¶‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§∏‡§Æ‡§æ‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§',
                assetsTitle: '‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§î‡§∞ ‡§®‡§ø‡§µ‡•á‡§∂',
                cashLabel: '‡§®‡§ï‡§¶ ‡§î‡§∞ ‡§¨‡•à‡§Ç‡§ï ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏',
                goldLabel: '‡§∏‡•ã‡§®‡§æ (‡§ó‡•ç‡§∞‡§æ‡§Æ)',
                silverLabel: '‡§ö‡§æ‡§Ç‡§¶‡•Ä (‡§ó‡•ç‡§∞‡§æ‡§Æ)',
                investmentsLabel: '‡§∂‡•á‡§Ø‡§∞/‡§®‡§ø‡§µ‡•á‡§∂',
                businessLabel: '‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø ‡§ï‡§æ ‡§Æ‡§æ‡§≤',
                rentalLabel: '‡§ï‡§ø‡§∞‡§æ‡§Ø‡§æ ‡§Ü‡§Ø (‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï)',
                liabilitiesTitle: '‡§¶‡§æ‡§Ø‡§ø‡§§‡•ç‡§µ (‡§ï‡§æ‡§ü‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø)',
                debtsLabel: '‡§ã‡§£ ‡§î‡§∞ ‡§≤‡•ã‡§®',
                totalWealthTitle: '‡§ï‡•Å‡§≤ ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø',
                deductibleTitle: '‡§ï‡§æ‡§ü‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø',
                zakatableTitle: '‡§ú‡§ï‡§æ‡§§ ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø',
                nisabTitle: '‡§®‡§ø‡§∏‡§æ‡§¨ ‡§∏‡•Ä‡§Æ‡§æ',
                payableTitle: '‡§¶‡•á‡§Ø ‡§ú‡§ï‡§æ‡§§ (2.5%)',
                nisabStatus: '‡§Ö‡§™‡§®‡•Ä ‡§ú‡§ï‡§æ‡§§ ‡§∞‡§æ‡§∂‡§ø ‡§¶‡•á‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ä‡§™‡§∞ ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç',
                calculateBtn: '‡§ú‡§ï‡§æ‡§§ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç',
                resetBtn: '‡§∏‡§≠‡•Ä ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç',
                printBtn: '‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü ‡§ï‡§∞‡•á‡§Ç',
                footer: '¬© 2026 Zakat Calculator | Running on ESP8266',
                belowNisab: '‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§®‡§ø‡§∏‡§æ‡§¨ ‡§∏‡•Ä‡§Æ‡§æ ‡§∏‡•á ‡§®‡•Ä‡§ö‡•á ‡§π‡•à‡•§ ‡§á‡§∏ ‡§∏‡§Æ‡§Ø ‡§ï‡•ã‡§à ‡§ú‡§ï‡§æ‡§§ ‡§¶‡•á‡§Ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§',
                aboveNisab: '‚úÖ ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§®‡§ø‡§∏‡§æ‡§¨ ‡§∏‡•Ä‡§Æ‡§æ ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•à‡•§ ‡§ú‡§ï‡§æ‡§§ ‡§¶‡•á‡§Ø ‡§π‡•à‡•§',
                langDisplay: 'üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä'
            }
        };

        // ========================================
        // STATE
        // ========================================
        let currentLang = 'en';
        let isDarkMode = false;

        // ========================================
        // DARK MODE DETECTION & MANAGEMENT
        // ========================================
        function initializeDarkMode() {
            // Check system preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                isDarkMode = true;
                document.documentElement.classList.add('dark');
                updateDarkModeIcons();
            } else {
                isDarkMode = false;
                document.documentElement.classList.remove('dark');
                updateDarkModeIcons();
            }

            // Listen for system preference changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (e.matches) {
                    enableDarkMode();
                } else {
                    disableDarkMode();
                }
            });
        }

        function toggleDarkMode() {
            if (isDarkMode) {
                disableDarkMode();
            } else {
                enableDarkMode();
            }
        }

        function enableDarkMode() {
            isDarkMode = true;
            document.documentElement.classList.add('dark');
            localStorage.setItem('theme', 'dark');
            updateDarkModeIcons();
        }

        function disableDarkMode() {
            isDarkMode = false;
            document.documentElement.classList.remove('dark');
            localStorage.setItem('theme', 'light');
            updateDarkModeIcons();
        }

        function updateDarkModeIcons() {
            const sunIcon = document.getElementById('sunIcon');
            const moonIcon = document.getElementById('moonIcon');
            if (isDarkMode) {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            } else {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }
        }

        // ========================================
        // LANGUAGE MANAGEMENT
        // ========================================
        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('language', lang);
            
            const t = translations[lang];
            
            // Update all text content
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('pricesTitle').textContent = t.pricesTitle;
            document.getElementById('goldPriceLabel').textContent = t.goldPriceLabel;
            document.getElementById('silverPriceLabel').textContent = t.silverPriceLabel;
            document.getElementById('priceHint').textContent = t.priceHint;
            document.getElementById('assetsTitle').textContent = t.assetsTitle;
            document.getElementById('cashLabel').textContent = t.cashLabel;
            document.getElementById('goldLabel').textContent = t.goldLabel;
            document.getElementById('silverLabel').textContent = t.silverLabel;
            document.getElementById('investmentsLabel').textContent = t.investmentsLabel;
            document.getElementById('businessLabel').textContent = t.businessLabel;
            document.getElementById('rentalLabel').textContent = t.rentalLabel;
            document.getElementById('liabilitiesTitle').textContent = t.liabilitiesTitle;
            document.getElementById('debtsLabel').textContent = t.debtsLabel;
            document.getElementById('totalWealthTitle').textContent = t.totalWealthTitle;
            document.getElementById('deductibleTitle').textContent = t.deductibleTitle;
            document.getElementById('zakatableTitle').textContent = t.zakatableTitle;
            document.getElementById('nisabTitle').textContent = t.nisabTitle;
            document.getElementById('payableTitle').textContent = t.payableTitle;
            document.getElementById('nisabStatus').textContent = t.nisabStatus;
            document.getElementById('calculateBtn').textContent = t.calculateBtn;
            document.getElementById('resetBtn').textContent = t.resetBtn;
            document.getElementById('printBtn').textContent = t.printBtn;
            document.getElementById('footer').textContent = t.footer;
            document.getElementById('langDisplay').textContent = t.langDisplay;
            
            // Set document direction
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.documentElement.lang = lang;
            
            calculate();
        }

        // ========================================
        // ZAKAT CALCULATION ENGINE
        // ========================================
        function calculate() {
            // Get prices
            const goldPrice = parseFloat(document.getElementById('goldPrice').value) || 78.50;
            const silverPrice = parseFloat(document.getElementById('silverPrice').value) || 0.95;
            
            // Get asset inputs
            const cash = parseFloat(document.getElementById('cash').value) || 0;
            const gold = parseFloat(document.getElementById('gold').value) || 0;
            const silver = parseFloat(document.getElementById('silver').value) || 0;
            const investments = parseFloat(document.getElementById('investments').value) || 0;
            const business = parseFloat(document.getElementById('business').value) || 0;
            const rental = parseFloat(document.getElementById('rental').value) || 0;
            const debts = parseFloat(document.getElementById('debts').value) || 0;
            
            // Calculate values
            const goldValue = gold * goldPrice;
            const silverValue = silver * silverPrice;
            const rentalValue = rental * 0.025; // Approximate current year
            
            // Total calculations
            const totalWealth = cash + goldValue + silverValue + investments + business + rentalValue;
            const zakatableWealth = Math.max(0, totalWealth - debts);
            
            // Nisab calculation (85g gold)
            const nisabThreshold = 85 * goldPrice;
            
            // Zakat amount
            const isEligible = zakatableWealth >= nisabThreshold;
            const zakatAmount = isEligible ? zakatableWealth * 0.025 : 0;
            
            // Format currency
            const formatCurrency = (value) => {
                return value.toLocaleString(currentLang === 'en' ? 'en-US' : 'en-US', {
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 2
                });
            };
            
            // Update displays
            document.getElementById('totalWealth').textContent = `$${formatCurrency(totalWealth)}`;
            document.getElementById('totalDeductible').textContent = `$${formatCurrency(debts)}`;
            document.getElementById('zakatableWealth').textContent = `$${formatCurrency(zakatableWealth)}`;
            document.getElementById('nisabAmount').textContent = `$${formatCurrency(nisabThreshold)}`;
            document.getElementById('payableZakat').textContent = `$${formatCurrency(zakatAmount)}`;
            
            // Update status
            const t = translations[currentLang];
            const statusBox = document.getElementById('nisabStatusBox');
            const statusMessage = document.getElementById('nisabStatusMessage');
            
            if (isEligible && totalWealth > 0) {
                statusBox.classList.add('hidden');
                document.getElementById('nisabStatus').textContent = t.aboveNisab;
            } else {
                statusMessage.textContent = t.belowNisab;
                statusBox.classList.remove('hidden');
                document.getElementById('nisabStatus').textContent = t.belowNisab;
            }
        }

        // ========================================
        // RESET FUNCTION
        // ========================================
        function resetForm() {
            document.querySelectorAll('input[type="number"]').forEach(input => {
                if (input.id === 'goldPrice') input.value = '78.50';
                else if (input.id === 'silverPrice') input.value = '0.95';
                else input.value = '';
            });
            calculate();
        }

        // ========================================
        // PRINT FUNCTION
        // ========================================
        function printZakat() {
            window.print();
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        document.addEventListener('DOMContentLoaded', function() {
            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                enableDarkMode();
            } else if (savedTheme === 'light') {
                disableDarkMode();
            } else {
                initializeDarkMode();
            }
            
            // Check for saved language
            const savedLang = localStorage.getItem('language') || 'en';
            setLanguage(savedLang);
            
            // Add event listeners
            document.querySelectorAll('input[type="number"]').forEach(input => {
                input.addEventListener('input', calculate);
            });
            
            calculate();
        });

        // Global functions
        window.calculate = calculate;
        window.resetForm = resetForm;
        window.printZakat = printZakat;
        window.setLanguage = setLanguage;
        window.toggleDarkMode = toggleDarkMode;
    </script>
</body>
</html>
